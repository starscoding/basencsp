define(["./utils"],function(c){var b={},f={getModal:function(){return $("#userslist")},getUl:function(){return $("#online-user-ul")},getMask:function(){return $("#userslist-mask")}};var e=function(g){if(g){f.getMask().removeClass("hide")}else{f.getMask().addClass("hide")}};var a=function(){e(true);$.ajax({type:"POST",dataType:"json",data:{},url:eastcom.baseURL+"/loginExtension/getOnlineUsers",success:function(g){if(g.success="true"){d(g.data)}else{c.showMsg("danger","在线用户加载失败")}e(false)},failure:function(){e(false);c.showMsg("danger","在线用户加载失败")}})};var d=function(h){var g=f.getUl();g.empty();$.each(h,function(k,j){g.append(c.getTplDom("online-user-detail-tpl",j))})};b.toggle=function(){f.getModal().modal("toggle");a()};b.init=function(){};return b});