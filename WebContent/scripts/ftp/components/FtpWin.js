Ext.define("Ext.inas.FtpWin",{extend:"Ext.window.Window",requires:["Ext.form.*","Ext.window.*","Ext.components.DateTimeField"],required:'<span style="color:red;font-weight:bold" data-qtip="Required">*</span>',initComponent:function(){var a=this;a.title=BUTTON_NEW;a.frame=false;a.border=false;a.id="FtpWin";a.height=300;a.width=300;a.layout="fit";a.style={zindex:20000};var b=Ext.create("Ext.inas.VendorComboBox",{id:"protocol",name:"protocol",labelAlign:"right",labelWidth:80,width:250,fieldLabel:"协议"});a.items=[Ext.create("Ext.form.Panel",{border:false,id:"addForm",bodyStyle:{margin:"5px 0px 0px 0px"},items:[{xtype:"textfield",id:"id",name:"id",hidden:true},{xtype:"textfield",id:"serverName",name:"serverName",fieldLabel:"服务器名称",allowBlank:false,labelAlign:"right",labelWidth:80,width:250},{xtype:"fieldcontainer",layout:"hbox",defaults:{labelAlign:"right",labelWidth:80,width:250},items:[b]},,{xtype:"textfield",id:"ip",name:"ip",fieldLabel:"IP",allowBlank:false,labelAlign:"right",labelWidth:80,width:250},{xtype:"textfield",id:"port",name:"port",fieldLabel:"端口",allowBlank:false,labelAlign:"right",labelWidth:80,width:250},{xtype:"textfield",id:"username",name:"username",fieldLabel:"用户名称",allowBlank:false,labelAlign:"right",labelWidth:80,width:250,minValue:0},{xtype:"textfield",id:"password",name:"password",fieldLabel:"密码",allowBlank:false,labelAlign:"right",labelWidth:80,width:250},{xtype:"textfield",id:"filePath",name:"filePath",fieldLabel:"文件路径",allowBlank:false,labelAlign:"right",labelWidth:80,width:250},{xtype:"textfield",fieldLabel:"描述",allowBlank:false,id:"desc",name:"desc",labelAlign:"right",labelWidth:80,width:250,}]})];a.buttons=[{text:BUTTON_OK,handler:function(){var d=this.up("window").down("form").getForm();if(!d.isValid()){Ext.Msg.show({title:"提示",msg:"请正确填写表单信息！",buttons:Ext.Msg.OK,icon:Ext.MessageBox.INFO});return}var c=new Ext.LoadMask(Ext.getBody(),{msg:"正在执行，请稍后..."});c.show();a.hide();d.submit({clientValidation:true,url:eastcom.baseURL+"/FtpServerController/editFtpServerInfo",method:"POST",success:function(f,g){var e=Ext.getCmp("gridPanel").getStore();e.removeAll();e.load();a.close();Ext.Msg.show({title:"提示",msg:"操作成功",buttons:Ext.Msg.OK,icon:Ext.MessageBox.INFO})},failure:function(){a.close();Ext.Msg.show({title:MSG_FAILURE,msg:"操作失败",buttons:Ext.Msg.OK,icon:Ext.Msg.ERROR})}})}},{text:BUTTON_CANCEL,handler:function(){a.close()}}];a.listeners={show:function(){Ext.getBody().mask()},close:function(){Ext.getBody().unmask()}};this.callParent()},loadRecord:function(a){var b=this;b.setTitle(BUTTON_EDIT);Ext.getCmp("id").setValue(a.get("id"));Ext.getCmp("serverName").setValue(a.get("name"));Ext.getCmp("protocol").setValue(a.get("protocol"));Ext.getCmp("ip").setValue(a.get("ip"));Ext.getCmp("port").setValue(a.get("port"));Ext.getCmp("username").setValue(a.get("username"));Ext.getCmp("password").setValue(a.get("password"));Ext.getCmp("filePath").setValue(a.get("filePath"));Ext.getCmp("desc").setValue(a.get("desc"))}});