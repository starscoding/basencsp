Eastcom.modules.main=(function(){var d={userInfo:"#baseUserInfo",showDesktopBtnId:"#show_desktop",desktopPanelId:"#desktop_panel",desktopPage:"#desktop_page",miniMenuPanel:"#choiceMenu",miniMenuBtn:"#minimenu",themeBtn:"#theme",overlayPanelId:"#overlay_panel",linkPathDivId:"menuContent",linkTreeId:"menuTree",menuPanel:"#menu-panel",historyVisitedPanel:"#r-menu-panel",menuTreePanel:"#l-menu-panel",username:"",menus:[],TITLE_WORDS:5,MENU_ITEM_WIDTH:77,MAX_PNAEL_WIDTH:4*this.MENU_ITEM_WIDTH,SCROLL_WIDTH:4*this.MENU_ITEM_WIDTH,ICON_ITEM_HEIGHT:95,scrollIncrement:79,LOGO_WIDTH:570,MAX_MENU_NUM:5,appIconPath:Eastcom.baseURL+"/static/images/common/appicons/"};function a(p){c.resizeLayout();c.loadMainProjectInfo();Eastcom.initTabContainer(function(){c.tabContainerEvent()});var n=Eastcom.getSysArguments();var l;if(n){eastcom.pageSize=n.defaultPageSize;eastcom.enableColumnHide=(n.enableColumnHide==1||n.enableColumnHide=="1");Eastcom.showDesktopInWindow=(n.showDesktopInWindow==1||n.showDesktopInWindow=="1");Eastcom.menuTopN=n.showMenuNum;Eastcom.mainMenusNum=5;if((typeof(n.mainMenusNum)!="undefined")){Eastcom.mainMenusNum=n.mainMenusNum;d.MAX_MENU_NUM=n.mainMenusNum}if(typeof(n.titleWordNum)!="undefined"){var i=parseInt(n.titleWordNum);d.TITLE_WORDS=i>5?i:5;d.MENU_ITEM_WIDTH=77+12*(d.TITLE_WORDS-5);d.scrollIncrement=d.MENU_ITEM_WIDTH+2}if(typeof(n.tabsNum)!="undefined"){Eastcom.tabsNum=n.tabsNum}if(typeof(n.timeBeforeMenuAutoHide)!="undefined"){Eastcom.timeBeforeMenuAutoHide=n.timeBeforeMenuAutoHide}if(typeof(n.menuExpandDepth)!="undefined"){EastcomMenu.menuExpandDepth=n.menuExpandDepth}if(typeof(n.showUserGuide)!="undefined"){EastcomMenu.showUserGuide=(n.showUserGuide==1||n.showUserGuide=="1")}if(typeof(n.floderStrong)!="undefined"){EastcomMenu.floderStrong=(n.floderStrong==1||n.floderStrong=="1")}if(typeof(n.menuQuickSearch)!="undefined"){Eastcom.menuQuickSearch=(n.menuQuickSearch==1||n.menuQuickSearch=="1")}Eastcom.showNotice=(n.isShowNotice==1||n.isShowNotice=="1");Eastcom.showHistoryVisitedPanel=(n.isShowHistroy==1||n.isShowHistroy=="1");if(typeof(n.desktopInfo)!="undefined"&&n.desktopInfo.length){Eastcom.desktopInfo=$.parseJSON(n.desktopInfo)}if(typeof(n.defaultPortalInfo)!="undefined"&&n.defaultPortalInfo.length){Eastcom.defaultTabInfo=$.parseJSON(n.defaultPortalInfo)}if(typeof(n.menuExpandDepth)!="undefined"){l=n.requestOnlineUserInterval}if(typeof(n.isShowSubNavi)!="undefined"){Eastcom.isShowSubNavi=parseInt(n.isShowSubNavi)}else{Eastcom.isShowSubNavi=1}}c.initPortal();Eastcom.modules.usersList.init(p,l);var o=Eastcom.showDesktopInWindow;var m=o?"block":"none";$(d.showDesktopBtnId).css({display:m});if(o){c.showDesktopEvent()}if(n&&n.theme&&n.theme.length&&n.theme!="null"&&n.theme!="_ALL_"){$(d.themeBtn).hide()}else{c.showThemePanelEvent()}b.initMenuBar();b.initQuickSearch();c.makeUserInfo();c.hideTopbarEvent();var e=$("#south table td #nocbox");var h=$("#south table td div.numinfo");if(Eastcom.showNotice){e.show();var f=new NoticeWin({closeAction:"hide",animationPosition:e.offset()});f.intervalLoad();e.click(function(){f.show()});h.click(function(){f.show()})}else{e.hide()}if(EastcomMenu.showUserGuide){c.showUserGuide()}if(Eastcom.isShowSubNavi==0){var g=$("#funcbar");g.empty();g.height(2);c.resizeLayout()}var k=$("#south table td div.userInfo");k.click(function(){this.userInfoWin=this.userInfoWin||new UserInfoWin({title:UE_TITLE,closeAction:"hide",animationPosition:k.offset()});this.userInfoWin.show()});var q=Eastcom.userInfo;if(q.times!=null){if(Number(q.times)<1){var j=new UserPasswordWin({title:FIRST_LOGIN_CHANGE_PSD,isFirstChange:true,masked:true});j.show()}else{setTimeout(function(){c.showUserToolTip()},500)}}}var b={initQuickSearch:function(){var g=$("#keywords-search");if(Eastcom.menuQuickSearch){var e=g.find("input");var f=function(i){var k=$("#l-menu-panel .menu-tree-panel").find("div:visible");var j=k.data("treeObj"),h=j.getNodesByParamFuzzy("nameCn",i);j.expandAll(false,false);j.refresh();if(!i||!i.length){return}$.each(h,function(l,m){j.expandNode(m.getParentNode(),true,false,false);j.expandNode(m,true,false,false);var n=m.nameCn.match(new RegExp(i,"i"));$("#"+m.tId).children("a").children("span:last").html(m.nameCn.replace(n,'<a style="background:yellow;color:#000;">'+n+"</a>"))})};e.on("keypress",function(h){if(h.keyCode==13){f(e.val())}})}else{g.hide()}},initMenuBar:function(){var f=this;$("#north_right > div.nav_center").html('<div style="position: relative; margin-top: 20px;">'+MSG_DATA_LOADING+"</div>");var e=function(l){$("#north_right > div.nav_center").html("<ul></ul>");var k=$("#north_right > div.nav_center > ul");k.empty();$.each(l,function(n,m){$(k).append(m)});var h=$("#north_right > div.nav_center > ul > li.icon-block").size();var g=(d.MENU_ITEM_WIDTH+2)*h+2;$(k).attr("scrollWidth",g);$(k).css("width",g);var j=f.getMenuNvWidth();$("#north_right > div.nav_center").css("width",j>g?g:j);var i=$("#north_right").outerWidth();$("#bottom_line").css("width",(i+63));if(i<$(k).attr("scrollWidth")){$("#north_right > div.nav_left").show();$("#north_right > div.nav_right").show()}f.initMenuScroll();f.initNavigationEvent()};f.loadMenuHtml(e)},loadMenuHtml:function(h){var g=this;var f="";var e=[];jQuery.ajax({type:"POST",async:true,dataType:"json",url:Eastcom.baseURL+"/loginExtension/getCurrentUserResource",data:{rootMenuName:rootMenuName},success:function(i){if(i.success=="true"){var k=i.data;d.menus=k.menus;EastcomMenu.menusData=k.menus;Eastcom.firstMenuPid=k.rootId;var j=0;g.loadSpecialData();g.preparePermissions();jQuery.each(d.menus,function(m,n){if(n.pid==Eastcom.firstMenuPid){var l=n.items;j=l.length;l.reverse();var o='<li class="vertical_line"></li>';e.push($(o));jQuery.each(l,function(s,t){if(t.status=="2"){return}var v=d.appIconPath+(t.image!=undefined&&t.image!=""?t.image:"default.png");var u='<li class="icon-block"><div class="menu-image"><p><img id="'+t.id+'" name="'+t.name+'" src="'+v+'"></p></div><a class="menu-text""><span>'+t.nameCn+"</span></a></li>";var p=$(u);p.css({width:d.MENU_ITEM_WIDTH});p.data("menuData",t);p.data("index",l.length-s);e.push(p);e.push($(o));var q=$("<li id='"+t.id+"'><a href='#'><img align='absMiddle' src='"+v+"'>"+t.nameCn+"</a></li>");q.data("menuData",t);$(d.miniMenuPanel+" > ul").prepend(q);g.createMenuUlHtml(t.id)});return false}});h(e)}else{$("#north_right div.nav_center div")[0].innerHTML=i.msg;alert(i.msg)}},error:function(j,l,k){var i=Eastcom.sprintf(LOAD_USER_RESOURCES_FAILURE,l);alert(i)}})},createMenuUlHtml:function(f){if(f==""||f==undefined){return}var h=new Array();h=EastcomMenu.getAllLowMenu(f,h);var g="tree"+f;var e="tree_panel_"+f;$("#l-menu-panel > div.menu-tree-panel").append('<div id="'+e+'"><ul id="'+g+'" class="ztree"></ul></div>');Eastcom.createMenuTree(g,h,false,false,null,false,null,false)},appendHisMenu:function(g){var k=this;var j=[];var l=0;for(x in g){if(l<Eastcom.menuTopN){var e=EastcomMenu.getMenuById(g[x]);if(e.id){j.push(e);l+=1}}}var m="",n="";for(y in j){var i=j[y];m+='<li><a href="javascript:" align="absmiddle" id="'+i.id+'" name="'+i.name+'" ';m+='title="'+i.nameCn+'" url="'+i.url+'">'+i.nameCn+"</a>";m+='<div class="delicon"></div></li>';var o=d.appIconPath+(i.image!=undefined&&i.image!=""?i.image:"bigdefault.png");n+='<li class="block" id="'+i.id+'" title="'+i.nameCn+'" name="'+i.name+'"';n+='url="'+i.url+'">';n+='<div class="img">';n+='<p><img src="'+o+'"></p>';n+='<div class="delicon"></div>';n+="</div>";n+="<span>"+i.nameCn+"</span>";n+="</li>"}var f=j.length;var p=d.ICON_ITEM_HEIGHT*f;var h=$("#r-menu-panel > #icon-menu > #big-menu-ul");$(h).attr("scrollHeight",p);$(h).html(n);$("#r-menu-panel > #list-menu > #small-menu-ul").html(m);k.bigmenulinkevent()},bigmenulinkevent:function(){var e=this;$("#r-menu-panel > #icon-menu > #big-menu-ul > li,#r-menu-panel > #list-menu > #small-menu-ul > li > a").click(function(){var j=$(this).attr("id");var h=$(this).attr("name");var i=$(this).attr("title");var g=$(this).attr("url");Eastcom.createTab(j,i,h,g);var f=$("#north_right div.nav_center ul li");EastcomMenu.hideMenu("menu-panel");f.unbind("hover")});$("#r-menu-panel > #icon-menu > #big-menu-ul > li.block > .img > p > img,#r-menu-panel > #icon-menu > #big-menu-ul > li.block > .img .delicon,#choose-style,#menu-panel > #r-menu-panel > #list-menu > ul > li > div.delicon").hover(function(){$(this).addClass("active")},function(){$(this).removeClass("active")});$("#r-menu-panel > #icon-menu > #big-menu-ul > li.block,#menu-panel > #r-menu-panel > #list-menu > ul > li").hover(function(){$(this).find("div.delicon").show()},function(){$(this).find("div.delicon").hide()});$("#r-menu-panel > #icon-menu > #big-menu-ul > li.block > div.img > div.delicon").bind("click",function(){var f=$(this).parents("ul").find("li").size();var i=$(this).parents("li").attr("id");var g=c.delMenuFromUsermenus(i);if(g){$(this).parents("li").remove();e.deleteUserMenu(i,"1");var h=d.ICON_ITEM_HEIGHT*(f-1);$("#big-menu-ul").attr("scrollHeight",h),c.initBigMenuUlScroll()}});$("#menu-panel > #r-menu-panel > #list-menu > ul > li > div.delicon").bind("click",function(){var g=$(this).prev().attr("id");var f=c.delMenuFromUsermenus(g);if(f){$(this).parents("li").remove();e.deleteUserMenu(g,"0")}})},deleteUserMenu:function(g,f){if(f=="0"){$('#big-menu-ul li[id="'+g+'"]').remove()}else{if(f=="1"){var e=$('#small-menu-ul li a[id="'+g+'"]');$(e).parents("li").remove()}}},initMenuScroll:function(f){$("#north_right > div.nav_left").hover(function(){$(this).addClass("active")},function(){$(this).removeClass("active")});$("#north_right > div.nav_right").hover(function(){$(this).addClass("active")},function(){$(this).removeClass("active")});var e=$("#north_right div.nav_center");$("#north_right > div.nav_left").click(function(){e.stop(true,true);var g=e.scrollLeft()-d.scrollIncrement;if(g<d.scrollIncrement){g=0}var h=e.data("scolling");if(typeof(h)=="undefined"||!h){e.data("scolling",true);e.animate({scrollLeft:g},300,"swing",function(){e.data("scolling",false)})}});$("#north_right > div.nav_right").click(function(){e.stop(true,true);var g=e.scrollLeft()+d.scrollIncrement;if(g+d.scrollIncrement>e.attr("scrollWidth")){g=e.attr("scrollWidth")}var h=e.data("scolling");if(typeof(h)=="undefined"||!h){e.data("scolling",true);e.animate({scrollLeft:g},300,"swing",function(){e.data("scolling",false)})}})},initNavigationEvent:function(){var i=Eastcom.showHistoryVisitedPanel;var k=this;var l=$("#north_right div.nav_center ul li");var j=function(){$("#north_right div.nav_center ul li.active").removeClass("active");EastcomMenu.hideMenu("menu-panel");l.unbind("hover")};var h=function(s){var u=$(s);if(u.hasClass("icon-block")){$("#north_right div.nav_center ul li.active").removeClass("active");u.addClass("active");var t=$("#north_right div.nav_left");var z=$("body").width();var o=$("#north_right").position().left;var v=u.position().left;var n=o+v;if(t.length){n+=t.width()}var A=z-n-$("#menu-panel").width();A=A-6;A=A<0?0:A;var r=u.find("img");var q=new Array();var p=$(r).attr("id");k.controlTreeShow(p);EastcomMenu.showMenus("menu-panel",{top:k.getNorthHeight()-1,right:A+"px"},function(){c.setMpanelHeight()});var B=$("#r-menu-panel > #icon-menu > #big-menu-ul > li").size();if(i&&B<Eastcom.menuTopN){c.getUserVisitedMenuTopN()}}};l.click(function(){var p=$(this);var o=p.data("menuData");if(p.hasClass("icon-block")){var n=o.isWebpage;if((n==1||n=="1")&&status!="3"){Eastcom.createTab(o.id,o.nameCn,o.name,o.location,null,true,true);return false}}l.hover(function(){if($(this).hasClass("icon-block")){var r=$(this).data("menuData");var q=r.isWebpage;if(q==1||q=="1"){return false}}h(this)},function(){});h(this)});if(Eastcom.timeBeforeMenuAutoHide>=0){$("#north_right").hover(function(){var p=$(this),o=$("#menu-panel");p.data("isIn",true);var n=o.data("to");if(n){clearTimeout(n)}},function(){var p=$(this),o=$("#menu-panel");p.data("isIn",false);var n=o.data("to");if(n){clearTimeout(n)}var q=setTimeout(function(){if(!o.data("isIn")){j()}},Eastcom.timeBeforeMenuAutoHide);o.data("to",q)});$("#menu-panel").hover(function(){var o=$(this);o.data("isIn",true);var n=o.data("to");if(n){clearTimeout(n)}},function(){var p=$(this),o=$("#north_right");p.data("isIn",false);var n=p.data("to");if(n){clearTimeout(n)}var q=setTimeout(function(){if(!o.data("isIn")){j()}},Eastcom.timeBeforeMenuAutoHide);p.data("to",q)})}EastcomMenu.hideMenuCb=function(){$("#north_right div.nav_center ul li.active").removeClass("active");l.unbind("hover")};var e=i?"block":"none";var m=$(d.menuTreePanel).outerWidth();var g=m;$(d.historyVisitedPanel).css({display:e});if(i){var f=$(d.historyVisitedPanel).outerWidth();g+=f;c.oftenVisitedStyle()}$(d.menuPanel).css({width:g+2});c.showMiniMenuEvent()},controlTreeShow:function(g){var e="tree_panel_"+g;var f=$("#l-menu-panel > div.menu-tree-panel > div");jQuery.each(f,function(){var h=$(this).attr("id");h==e?$(this).css("display","block"):$(this).css("display","none")})},getNorthHeight:function(){return $("#north").is(":visible")?$("#north").outerHeight():0},getMenuNvWidth:function(){var e=$("#north").outerWidth();var f=0,i=0;f=e>d.LOGO_WIDTH?(e-d.LOGO_WIDTH):e;var j=d.MENU_ITEM_WIDTH+2;var g=Math.floor(f/j);var h=f%j;i=g>d.MAX_MENU_NUM?j*d.MAX_MENU_NUM+2:(f-h+2);return i},loadSpecialData:function(){var e={};jQuery.each(d.menus,function(f,g){g.items.sort(function(i,h){if(i.order<h.order){return -1}if(i.order>h.order){return 1}return 0});jQuery.each(g.items,function(l,n){var o=n.isWebpage;var h={id:n.id,pid:n.pid,name:n.name,nameCn:n.nameCn,url:n.location,image:n.image,status:n.status,isWebpage:o};if(o){Eastcom.pageMenuData.push(h);if(n.status!="3"){var k=EastcomMenu.getItemDataByPid(h.id);var j={};$(k).each(function(m,p){j[p.name]=true});e[h.name]=j}}EastcomMenu.specialMenu.push(h)})});Eastcom.permissionObjects=e},preparePermissions:function(){var e=Eastcom.pageMenuData}};var c={makeUserInfo:function(){var f=d.userInfo;var e=$(f).find("li");var g={};$(e).each(function(h,j){var l=$(j).attr("id");var k=$(j).text();g[l]=k=="null"?"":k});Eastcom.userInfo=g;$(f).remove()},showUserGuide:function(){var e=$("#userGuide");e.show();this.resizeLayout();e.bind("click",function(){location.href=eastcom.baseURL+"/userguide/download"})},showUserToolTip:function(){var f=$("div.userInfo a");var g=eastcom.getUserInfo();if(g==null){return}var e="<ul>";e+="<li>"+MOBILE+"："+g.mobileNo+"</br></li>";e+="<li>"+EMAIL+"："+g.email+"</br></li>";e+="<li>"+LOGIN_TIMES+"："+(parseInt(g.times)+1)+"</br></li>";e+="<li>"+LAST_LOGIN_TIME+"："+g.lastLoginTime+"</br></li>";e+="<li>"+LAST_LOGIN_IP+"："+g.lastLoginIp+"</li>";e+="</ul>";$(f).attr("title",e);$("div.userInfo a[title]").tooltip({position:"bottom right",offset:[-5,-90],effect:"fade",opacity:1}).dynamic({bottom:{offset:[-3,19],direction:"down",bounce:true}});$(".userInfo a").trigger("mouseenter");setTimeout(function(){$(".userInfo a").trigger("mouseleave")},3000)},initPortal:function(){if(indexPageId!=null&&indexPageId.length){Eastcom.createTab(indexPageId,indexPageTitle,indexPageName,indexPageUrl,indexPageTitle,false,true)}else{var e=Eastcom.defaultTabInfo;Eastcom.createTab(e.id,e.nameCn,e.name,e.src,e.nameCn,e.closeable==1,true)}},showDesktopEvent:function(){var g=this;var f=d.desktopPanelId;var h=$(f).outerHeight();var e=$("#south").outerHeight();$(d.showDesktopBtnId).bind("click",function(){g.loadDesktop();if($(d.desktopPanelId+":visible").length){$(f).animate({bottom:-(e+h)},600,function(){$(this).hide()});return}$(f).show().animate({bottom:e},1200)})},showThemePanelEvent:function(){var e=this;setTimeout(function(){if(typeof(Eastcom.themePanel)=="undefined"){Eastcom.themePanel=new ThemePanel()}},500);$(d.themeBtn).bind("click",function(){if(typeof(Eastcom.themePanel)=="undefined"){Eastcom.themePanel=new ThemePanel()}if(Eastcom.themePanel.isShow()){Eastcom.themePanel.hide()}else{Eastcom.themePanel.show()}})},loadDesktop:function(){var e=d.desktopPanelId+" > "+d.desktopPage;var f=$(e+" > iframe").length;var g=Eastcom.desktopInfo;if(f==0){$(e).append('<iframe id="'+g.id+'" name="'+g.name+'" allowTransparency="true" src="'+g.src+'"  onload="" border="0" frameborder="0" framespacing="0" marginheight="0" marginwidth="0" style="width:100%;height:100%;"></iframe> ')}},hideTopbarEvent:function(){var f=this;var e=$("#hide_topbar");e.bind("click",function(){$("#north").slideToggle(300,function(){c.resizeLayout()});$(this).toggleClass("up");var g=$(this).attr("class").indexOf("up")>=0;if(g){$(d.miniMenuBtn).css("display","inline-block");$("#north").css("display","none");$(e).attr("title",SHOWHEAD)}else{$("#north").css("display","block");$(d.miniMenuBtn).hide();$(e).attr("title",HIDEHEAD)}$.cookie("hideTopbar",(g?"1":null),{expires:1000,path:"/"});Eastcom.resizeTabContainer();f.resizeLayout()});if($.cookie("hideTopbar")=="1"){$(e).triggerHandler("click")}},showMiniMenuEvent:function(){var e=this;$(d.miniMenuBtn).click(function(){var g=$("#taskbar").outerHeight()-6;var f=$("#taskbar_right").outerWidth()-37;$(d.miniMenuPanel).css({display:"block",top:g,right:f})});$(d.miniMenuPanel).mouseleave(function(){$(this).hide()});$(d.miniMenuPanel+" > ul > li").bind("click",function(){var f=$(this).attr("id");e.menuSelectChange(f,$(this).data("menuData"))})},tabContainerEvent:function(){var f=this;var g=f.getPathSpan();$("div a.tab").live("click",function(){var h=$(this).attr("id").slice(10);EastcomMenu.showMenuPath(h,g,function(){f.linkPathEvent()})});var e=Eastcom.containerId;$("#"+e).bind("_close",function(){setTimeout(function(){c.setActiveTab(g)},1000)})},resizeLayout:function(){var m=this;var g=(window.document.documentElement.clientWidth||window.document.body.clientWidth||window.innerHeight);var o=(window.document.documentElement.clientHeight||window.document.body.clientHeight||window.innerHeight);var p=$("#north").is(":visible")?$("#north").outerHeight():0;var j=$("#funcbar").is(":visible")?$("#funcbar").outerHeight():0;var h=$("#south").outerHeight();var n=o-p-j-h-$("#taskbar").outerHeight();$("#center").height(n);$("#center iframe").css({height:n});var e=g-$("#taskbar_left").outerWidth()-$("#taskbar_right").outerWidth();$("#tabs_container").width(e-$("#tabs_left_scroll").outerWidth()-$("#tabs_right_scroll").outerWidth()-2);$("#taskbar_center").width(e-1);var i=document.getElementById("tabs_container").scrollWidth;$("#tabs_container").attr("scrollWidth",i);$("#tabs_container").triggerHandler("_resize");m.setMpanelHeight(o-p-h);var k=$("#north_right > div.nav_center > ul");var l=b.getMenuNvWidth();$("#bottom_line").css("width",($("#north_right").outerWidth()+63));var f=$(k).attr("scrollWidth");$("#north_right > div.nav_center").css("width",l>f?f:l);if($("#north_right").outerWidth()<f){$("#north_right > div.nav_left").show();$("#north_right > div.nav_right").show()}else{$("#north_right > div.nav_left").hide();$("#north_right > div.nav_right").hide()}},getMpanelHeight:function(){var g=(window.document.documentElement.clientHeight||window.document.body.clientHeight||window.innerHeight);var e=$("#north").is(":visible")?$("#north").outerHeight():0;var f=$("#south").outerHeight();var h=g-e-f-2;return h},setMpanelHeight:function(e){var f=this;var g=e?e:f.getMpanelHeight();g=g*0.9;$("#menu-panel").css({height:g});$("#l-menu-panel,#r-menu-panel").css({height:g-8});if(Eastcom.menuQuickSearch){$("#menu-panel .menu-tree-panel").css({height:g-42+"px",top:"40px"})}$("#big-menu-ul,#small-menu-ul").css({height:g-63});f.initBigMenuUlScroll();$("#big-menu-ul").mousewheel(function(){$("#big-menu-ul").stop().animate({scrollTop:($("#big-menu-ul").scrollTop()-this.D)},500)})},getMpanelWidth:function(){var e=(window.document.documentElement.clientWidth||window.document.body.clientWidth||window.innerHeight);return e},initBigMenuUlScroll:function(){var i=this;var f=$("#icon-menu .scroll-up:first");var k=$("#icon-menu .scroll-down:first");var g=$("#icon-menu ul");var h=$(g).attr("scrollHeight");var j=$(g).height();if(j<h){var e=j-20;$(g).height(e);f.show();k.show()}else{f.hide();k.hide()}i.initScroll("icon-menu")},initScroll:function(h){var e=105;var g=$("#"+h+" > ul:first");var f=function(i,k,j){g.animate({scrollTop:(g.scrollTop()+k)},500,function(){if(i.hasClass(j)){f(i,k,j)}})};$("#"+h+" > .scroll-up").die("mouseenter");$("#"+h+" > .scroll-up").die("mouseleave");$("#"+h+" > .scroll-up").live("mouseenter",function(){$(this).addClass("scroll-up-hover");f($(this),-e,"scroll-up-hover")});$("#"+h+" > .scroll-up").live("mouseleave",function(){$(this).removeClass("scroll-up-hover");g.stop()});$("#"+h+" > .scroll-down").die("mouseenter");$("#"+h+" > .scroll-down").die("mouseleave");$("#"+h+" > .scroll-down").live("mouseenter",function(){$(this).addClass("scroll-down-hover");f($(this),e,"scroll-down-hover")});$("#"+h+" > .scroll-down").live("mouseleave",function(){$(this).removeClass("scroll-down-hover");g.stop()})},menuSelectChange:function(j,h){var g=this;if(j==undefined){return}if(h){var e=h.isWebpage;if(e==1||e=="1"){Eastcom.createTab(h.id,h.nameCn,h.name,h.location,null,true,true);return false}}var i=$("#taskbar").outerHeight();$(d.miniMenuPanel).hide();var f=g.getMpanelHeight()-i-2;EastcomMenu.showMenus("menu-panel",{right:"0px",top:i},function(){g.setMpanelHeight(f);b.controlTreeShow(j)})},getUserVisitedMenuTopN:function(){jQuery.ajax({type:"POST",async:true,dataType:"json",data:{topn:Eastcom.menuTopN},url:Eastcom.baseURL+"/loginExtension/getUserVisitedTopN",success:function(e){if(e.success=="true"){var f=e.data;b.appendHisMenu(f)}},error:function(f,h,g){var e=Eastcom.sprintf(LOAD_USER_RESOURCES_FAILURE,h)}})},oftenVisitedStyle:function(){$("#choose-style").bind("click",function(){$(this).toggleClass("up");var e=$(this).attr("class").indexOf("up")>=0;if(e){$("#icon-menu").hide();$("#list-menu").show()}else{$("#list-menu").hide();$("#icon-menu").show()}})},delMenuFromUsermenus:function(f){var e=false;jQuery.ajax({type:"POST",async:false,dataType:"json",data:{menuId:f},url:Eastcom.baseURL+"/loginExtension/delMenuFromUsermenus",success:function(g){if(g.success=="true"){e=true}},error:function(g,i,h){e=false}});return e},setActiveTab:function(e){var f=this;var g=Eastcom.tabContainerObj.getActiveTabId();if(g!=null){EastcomMenu.showMenuPath(g,e,function(){f.linkPathEvent()})}},getPathSpan:function(){return jQuery("#funcbar #funcbar_left div span")},linkPathEvent:function(){var f=this;var e=f.getPathSpan();$(e).find("a").click(function(){var n=$(this).attr("id");var j=new Array();j=EastcomMenu.getAllLowMenu(n,j);var k=$(e).find("a:last");var i=$(e).find("a");var m=$(e).text();var h=m.lastIndexOf(">");var g=m.substr(h+2);var l=$(k).attr("id");EastcomMenu.showMenus(d.linkPathDivId,{top:$(this).offset().top+20+"px",left:$(this).offset().left+"px"},function(){});if(Eastcom.timeBeforeMenuAutoHide>=0){$("#"+d.linkPathDivId).hover(function(){var p=$(this);p.data("isIn",true);var o=p.data("to");if(o){clearTimeout(o)}},function(){var p=$(this);p.data("isIn",false);var o=p.data("to");if(o){clearTimeout(o)}var q=setTimeout(function(){if(!p.data("isIn")){EastcomMenu.hideMenu(d.linkPathDivId)}},Eastcom.timeBeforeMenuAutoHide);p.data("to",q)})}Eastcom.createMenuTree(d.linkTreeId,j,false,true,l,true,g,true)})},onBodyDown:function(f){if(Eastcom.showDesktopInWindow){var e=f.target.id;if(e!=d.desktopPanelId&&e!=d.showDesktopBtnId){Eastcom.hidePanel(d.desktopPanelId)}}},loadMainProjectInfo:function(){var e=function(f){if(f&&f.mainPageConfig){$.each(f.mainPageConfig,function(g,i){if(i.name=="mainHeadBackImg"){var h=i.value.replace("*",eastcom.getTheme());$("[name=head_bg] [name=northBack]").css({background:"url("+eastcom.baseURL+h+")"})}else{if(i.name=="mainFootInfo"){$("#status_text")[0].innerHTML=i.value}else{if(i.name=="mainTitle"){document.title=i.value}}}})}};jQuery.ajax({type:"POST",async:true,dataType:"json",url:eastcom.baseURL+"/projectInfo-unAuth/getLoginPageConfig",data:{types:"M"},success:function(f){e(f.data)},error:function(f,h,g){}})}};return{initMain:a,resizeLayout:function(){c.resizeLayout()},menuSelectChange:function(e){c.menuSelectChange(e)},linkPathEvent:function(){c.linkPathEvent()},updateUserLoginInfo:function(){c.updateUserLoginInfo()}}})();