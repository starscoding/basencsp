define(["menuitem","./tab","./utils"],function(g,e,b){var c={};var f={image:null,isShowDesktop:"0",isWebpage:"1",kind:"0",order:0,pid:"",status:"1",childs:[]};var a=function(h){h.menu=g.create($.extend({},f,h));e.add(h)};$.extend(c,{permissionsData:[],permissionObjects:{},tonggleLeftTree:function(j,i){var h=$("#content > .left-tree"),k=$("#tabs-iframe-cnt"),m=240,n=10,l;if(j){l=function(){if(n<m){h.width(n);k.css({"margin-left":n+10});n+=10;setTimeout(l,10)}else{$.type(i)=="function"?i():{}}}}else{l=function(){if(m>n){h.width(m);k.css({"margin-left":m+10});m-=10;setTimeout(l,10)}else{$.type(i)=="function"?i():{}}}}l()},syncIframeHeight:function(h){h=h||$("#tabs-iframe-cnt > div.active > iframe")[0];if(h){h.style.height=($(h.contentWindow.document.documentElement).outerHeight(true)>$(h.contentWindow.document.documentElement)[0].scrollHeight?$(h.contentWindow.document.documentElement).outerHeight(true):$(h.contentWindow.document.documentElement)[0].scrollHeight)+"px"}},createTab:function(o,m,i,h,l,k,j,n){if(!m&&!i&&!h&&!l){a(o)}else{a({id:o,name:i,nameCn:m,location:h,forceRefresh:n,closable:k})}},closeTab:function(h){e.close(h)},getTab:function(h){return e.getTab(h)},getCurrentTab:function(){return e.getCurrent()},showMsg:function(i,j,h){b.showMsg(i,j,h===true?true:false)}});var d=function(){window.Eastcom=c};d.initPermissionData=function(j){var i={};var h=function(k){if(!k||!k.length){return}$.each(k,function(m,n){if(n.isWebPage()){var l={};if(n.childs.length){$.each(n.childs,function(o,p){l[p.name]=true})}i[n.name]=l}h(n.childs)});c.permissionObjects=i};h(j)};return d});